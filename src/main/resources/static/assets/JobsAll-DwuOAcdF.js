import{r as d,l as M,m as $,s as S,_ as m,n as H,o as _,j as t,p as z,q as D,a6 as w,a7 as ie,x as N,a8 as ce,N as de,P as Y,T as u,S as pe,d as k,Q as q,R as L,e as P,a9 as ue,h as U,aa as O,a2 as E,B as G}from"./index-MVBtN63Y.js";const oe=d.createContext();function he(e){return M("MuiTable",e)}$("MuiTable",["root","stickyHeader"]);const ge=["className","component","padding","size","stickyHeader"],xe=e=>{const{classes:a,stickyHeader:o}=e;return D({root:["root",o&&"stickyHeader"]},he,a)},fe=S("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:o}=e;return[a.root,o.stickyHeader&&a.stickyHeader]}})(({theme:e,ownerState:a})=>m({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":m({},e.typography.body2,{padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},a.stickyHeader&&{borderCollapse:"separate"})),K="table",be=d.forwardRef(function(a,o){const n=H({props:a,name:"MuiTable"}),{className:i,component:l=K,padding:c="normal",size:r="medium",stickyHeader:p=!1}=n,h=_(n,ge),g=m({},n,{component:l,padding:c,size:r,stickyHeader:p}),f=xe(g),y=d.useMemo(()=>({padding:c,size:r,stickyHeader:p}),[c,r,p]);return t.jsx(oe.Provider,{value:y,children:t.jsx(fe,m({as:l,role:l===K?null:"table",ref:o,className:z(f.root,i),ownerState:g},h))})}),W=d.createContext();function ve(e){return M("MuiTableBody",e)}$("MuiTableBody",["root"]);const me=["className","component"],ye=e=>{const{classes:a}=e;return D({root:["root"]},ve,a)},je=S("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,a)=>a.root})({display:"table-row-group"}),Ce={variant:"body"},X="tbody",Te=d.forwardRef(function(a,o){const n=H({props:a,name:"MuiTableBody"}),{className:i,component:l=X}=n,c=_(n,me),r=m({},n,{component:l}),p=ye(r);return t.jsx(W.Provider,{value:Ce,children:t.jsx(je,m({className:z(p.root,i),as:l,ref:o,role:l===X?null:"rowgroup",ownerState:r},c))})});function Re(e){return M("MuiTableCell",e)}const ke=$("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),we=["align","className","component","padding","scope","size","sortDirection","variant"],Me=e=>{const{classes:a,variant:o,align:n,padding:i,size:l,stickyHeader:c}=e,r={root:["root",o,c&&"stickyHeader",n!=="inherit"&&`align${w(n)}`,i!=="normal"&&`padding${w(i)}`,`size${w(l)}`]};return D(r,Re,a)},$e=S("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:o}=e;return[a.root,a[o.variant],a[`size${w(o.size)}`],o.padding!=="normal"&&a[`padding${w(o.padding)}`],o.align!=="inherit"&&a[`align${w(o.align)}`],o.stickyHeader&&a.stickyHeader]}})(({theme:e,ownerState:a})=>m({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${e.palette.mode==="light"?ie(N(e.palette.divider,1),.88):ce(N(e.palette.divider,1),.68)}`,textAlign:"left",padding:16},a.variant==="head"&&{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},a.variant==="body"&&{color:(e.vars||e).palette.text.primary},a.variant==="footer"&&{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},a.size==="small"&&{padding:"6px 16px",[`&.${ke.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},a.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},a.padding==="none"&&{padding:0},a.align==="left"&&{textAlign:"left"},a.align==="center"&&{textAlign:"center"},a.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},a.align==="justify"&&{textAlign:"justify"},a.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default})),x=d.forwardRef(function(a,o){const n=H({props:a,name:"MuiTableCell"}),{align:i="inherit",className:l,component:c,padding:r,scope:p,size:h,sortDirection:g,variant:f}=n,y=_(n,we),b=d.useContext(oe),v=d.useContext(W),R=v&&v.variant==="head";let C;c?C=c:C=R?"th":"td";let j=p;C==="td"?j=void 0:!j&&R&&(j="col");const T=f||v&&v.variant,J=m({},n,{align:i,component:C,padding:r||(b&&b.padding?b.padding:"normal"),size:h||(b&&b.size?b.size:"medium"),sortDirection:g,stickyHeader:T==="head"&&b&&b.stickyHeader,variant:T}),I=Me(J);let A=null;return g&&(A=g==="asc"?"ascending":"descending"),t.jsx($e,m({as:C,ref:o,className:z(I.root,l),"aria-sort":A,scope:j,ownerState:J},y))});function Se(e){return M("MuiTableHead",e)}$("MuiTableHead",["root"]);const He=["className","component"],_e=e=>{const{classes:a}=e;return D({root:["root"]},Se,a)},ze=S("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,a)=>a.root})({display:"table-header-group"}),De={variant:"head"},Z="thead",Je=d.forwardRef(function(a,o){const n=H({props:a,name:"MuiTableHead"}),{className:i,component:l=Z}=n,c=_(n,He),r=m({},n,{component:l}),p=_e(r);return t.jsx(W.Provider,{value:De,children:t.jsx(ze,m({as:l,className:z(p.root,i),ref:o,role:l===Z?null:"rowgroup",ownerState:r},c))})});function Ae(e){return M("MuiTableRow",e)}const ee=$("MuiTableRow",["root","selected","hover","head","footer"]),Ne=["className","component","hover","selected"],We=e=>{const{classes:a,selected:o,hover:n,head:i,footer:l}=e;return D({root:["root",o&&"selected",n&&"hover",i&&"head",l&&"footer"]},Ae,a)},Ie=S("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:o}=e;return[a.root,o.head&&a.head,o.footer&&a.footer]}})(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${ee.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${ee.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:N(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:N(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}})),te="tr",ae=d.forwardRef(function(a,o){const n=H({props:a,name:"MuiTableRow"}),{className:i,component:l=te,hover:c=!1,selected:r=!1}=n,p=_(n,Ne),h=d.useContext(W),g=m({},n,{component:l,hover:c,selected:r,head:h&&h.variant==="head",footer:h&&h.variant==="footer"}),f=We(g);return t.jsx(Ie,m({as:l,ref:o,className:z(f.root,i),role:l===te?null:"row",ownerState:g},p))}),Be=({title:e,subtitle:a,children:o,action:n,footer:i,cardheading:l,headtitle:c,headsubtitle:r,middlecontent:p})=>t.jsxs(de,{sx:{padding:0},elevation:9,variant:void 0,children:[l?t.jsxs(Y,{children:[t.jsx(u,{variant:"h5",children:c}),t.jsx(u,{variant:"subtitle2",color:"textSecondary",children:r})]}):t.jsxs(Y,{sx:{p:"30px"},children:[e&&t.jsxs(pe,{direction:"row",spacing:2,justifyContent:"space-between",alignItems:"center",mb:3,children:[t.jsxs(k,{children:[e&&t.jsx(u,{variant:"h5",children:e}),a&&t.jsx(u,{variant:"subtitle2",color:"textSecondary",children:a})]}),n]}),o]}),p,i]});var F={},Pe=L;Object.defineProperty(F,"__esModule",{value:!0});var se=F.default=void 0,Ue=Pe(q()),Oe=t;se=F.default=(0,Ue.default)((0,Oe.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");var V={},Ee=L;Object.defineProperty(V,"__esModule",{value:!0});var ne=V.default=void 0,qe=Ee(q()),Le=t;ne=V.default=(0,qe.default)((0,Le.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");var Q={},Fe=L;Object.defineProperty(Q,"__esModule",{value:!0});var re=Q.default=void 0,Ve=Fe(q()),Qe=t;re=Q.default=(0,Ve.default)((0,Qe.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");const Ye=()=>{const[e,a]=d.useState([]),[o,n]=d.useState(!0),i=d.useCallback(async()=>{n(!0);try{const r=localStorage.getItem("token");if(!r){console.error("No token found");return}const h=(await P.get("http://localhost:8080/api/jobs/all",{headers:{Authorization:`Bearer ${r}`}})).data.sort((g,f)=>f.id-g.id);a(h)}catch(r){console.error("Error fetching jobs:",r)}finally{n(!1)}},[]),l=async(r,p)=>{const h=localStorage.getItem("token");try{await P.put(`http://localhost:8080/api/jobs/update/${r}`,p,{headers:{Authorization:`Bearer ${h}`,"Content-Type":"multipart/form-data"}}),a(g=>g.map(f=>f.id===r?{...f,...p}:f))}catch(g){throw g}},c=async r=>{const p=localStorage.getItem("token");try{await P.delete(`http://localhost:8080/api/jobs/delete/${r}`,{headers:{Authorization:`Bearer ${p}`}}),a(h=>h.filter(g=>g.id!==r))}catch(h){throw h}};return d.useEffect(()=>{i()},[i]),{jobs:e,loading:o,fetchJobs:i,updateJob:l,deleteJob:c}},Ge=(e,a=10)=>e.length>a?`${e.substring(0,a)}...`:e,Xe=()=>{const{jobs:e,loading:a,updateJob:o,deleteJob:n}=Ye(),[i,l]=d.useState(!1),[c,r]=d.useState(null),[p,h]=d.useState(!1),[g,f]=d.useState(null),[y,b]=d.useState({open:!1,message:"",isSuccess:!1}),[v,R]=d.useState({title:"",description:"",deadline:"",posterImage:null}),C=s=>{r(s),R({title:s.title,description:s.description,deadline:s.deadline,posterImage:null}),l(!0)},j=()=>{l(!1),r(null)},T=s=>{s.target.name==="posterImage"?R({...v,posterImage:s.target.files[0]}):R({...v,[s.target.name]:s.target.value})},J=async()=>{if(!c)return;const s=new FormData;s.append("title",v.title),s.append("description",v.description),s.append("deadline",v.deadline),v.posterImage&&s.append("posterImage",v.posterImage);try{await o(c.id,s),b({open:!0,message:"Job updated successfully!",isSuccess:!0}),j()}catch(B){console.error("Error updating job:",B),b({open:!0,message:"Job update failed!",isSuccess:!1})}},I=async()=>{if(g)try{await n(g.id),b({open:!0,message:"Job deleted successfully!",isSuccess:!0}),h(!1),f(null)}catch(s){console.error("Error deleting job:",s),b({open:!0,message:"Job deletion failed!",isSuccess:!1})}},A=s=>{f(s),h(!0)},le=()=>{h(!1),f(null)};return d.useEffect(()=>{if(y.open){const s=setTimeout(()=>{b(B=>({...B,open:!1}))},3e3);return()=>clearTimeout(s)}},[y]),t.jsxs(Be,{title:"All Jobs",children:[t.jsx(k,{sx:{overflow:"auto",width:{xs:"280px",sm:"auto"}},children:a?t.jsx(u,{variant:"subtitle1",children:"Loading..."}):e.length===0?t.jsx(u,{variant:"subtitle1",children:"No Jobs Posted Yet"}):t.jsxs(be,{"aria-label":"jobs table",sx:{whiteSpace:"nowrap",mt:2},children:[t.jsx(Je,{children:t.jsxs(ae,{children:[t.jsx(x,{children:t.jsx(u,{fontWeight:600,children:"Title"})}),t.jsx(x,{children:t.jsx(u,{fontWeight:600,children:"Description"})}),t.jsx(x,{children:t.jsx(u,{fontWeight:600,children:"Type"})}),t.jsx(x,{children:t.jsx(u,{fontWeight:600,children:"Location"})}),t.jsx(x,{children:t.jsx(u,{fontWeight:600,children:"Rate"})}),t.jsx(x,{children:t.jsx(u,{fontWeight:600,children:"Posted Date"})}),t.jsx(x,{children:t.jsx(u,{fontWeight:600,children:"Deadline"})}),t.jsx(x,{children:t.jsx(u,{fontWeight:600,children:"Applications"})}),t.jsx(x,{children:t.jsx(u,{fontWeight:600,children:"Status"})}),t.jsx(x,{children:t.jsx(u,{fontWeight:600,children:"Action"})})]})}),t.jsx(Te,{children:e.map(s=>t.jsxs(ae,{children:[t.jsx(x,{children:t.jsx(u,{fontWeight:500,children:s.title})}),t.jsx(x,{children:t.jsx(u,{variant:"body2",children:Ge(s.description)})}),t.jsx(x,{children:s.type}),t.jsx(x,{children:s.location}),t.jsx(x,{children:s.rate}),t.jsx(x,{children:s.postedDate}),t.jsx(x,{children:s.deadline}),t.jsx(x,{children:s.applicationCount}),t.jsx(x,{children:t.jsx(ue,{label:"Active",sx:{backgroundColor:"success.main",color:"#fff"}})}),t.jsxs(x,{children:[t.jsx(U,{onClick:()=>C(s),color:"primary",children:t.jsx(re,{})}),t.jsx(U,{onClick:()=>A(s),color:"error",children:t.jsx(ne,{})})]})]},s.id))})]})}),t.jsx(O,{open:i,onClose:j,children:t.jsxs(k,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:"8px"},children:[t.jsxs(k,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[t.jsx(u,{variant:"h6",children:"Update Job"}),t.jsx(U,{onClick:j,children:t.jsx(se,{})})]}),t.jsx(E,{label:"Title",fullWidth:!0,margin:"normal",name:"title",value:v.title,onChange:T}),t.jsx(E,{label:"Description",fullWidth:!0,margin:"normal",name:"description",value:v.description,onChange:T,multiline:!0,rows:3}),t.jsx(E,{label:"Deadline",fullWidth:!0,margin:"normal",name:"deadline",type:"date",value:v.deadline,onChange:T}),t.jsx("input",{type:"file",name:"posterImage",accept:"image/*",onChange:T,style:{marginTop:"10px"}}),t.jsx(G,{variant:"contained",color:"primary",fullWidth:!0,onClick:J,sx:{mt:2},children:"Save Changes"})]})}),t.jsx(O,{open:y.open,onClose:()=>b(s=>({...s,open:!1})),children:t.jsx(k,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:300,bgcolor:"background.paper",p:4,textAlign:"center",borderRadius:"8px"},children:t.jsx(u,{variant:"h6",color:y.isSuccess?"green":"red",children:y.message})})}),t.jsx(O,{open:p,onClose:le,children:t.jsxs(k,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:300,bgcolor:"background.paper",p:4,textAlign:"center",borderRadius:"8px"},children:[t.jsx(u,{variant:"h6",children:"Are you sure you want to delete?"}),t.jsx(G,{onClick:I,color:"error",variant:"contained",sx:{mt:2},children:"Delete"})]})})]})};export{Xe as default};
